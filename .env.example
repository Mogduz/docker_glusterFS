# =============================================================================
# Gluster Solo (2 Bricks) — .env.example
# Copy this file to `.env` and adjust values as needed.
#
# This stack builds a single Gluster server with two bricks inside one container.
# It publishes Gluster management ports (24007-24008) and **data ports**
# for bricks. Clients on another host (e.g., 10.1.0.0/16) can mount via:
#   mount -t glusterfs gluster-solo:/gv0 /mnt/gluster
#
# IMPORTANT: The published DATA_PORT_* range MUST include all ports Gluster
# may choose for bricks. We default to the IANA ephemeral range 49152–60999,
# and we also cap Gluster with MAX_PORT to 60999. Keep these in sync.
# =============================================================================

# -----------------------------------------------------------------------------
# Identity & runtime
CONTAINER_NAME=gluster-solo          # container name
HOSTNAME_GLUSTER=gluster-solo        # hostname visible in Gluster peer/vol info
TZ=UTC                                # time zone
UMASK=0022                            # process umask inside container
LOG_LEVEL=INFO                        # INFO|WARNING|DEBUG (entrypoint verbosity)

# -----------------------------------------------------------------------------
# Healthcheck
HC_INTERVAL=10s
HC_TIMEOUT=5s
HC_START_PERIOD=30s
HC_RETRIES=20

# -----------------------------------------------------------------------------
# Networking / Ports
MGMT_PORT1=24007                      # Gluster management
MGMT_PORT2=24008                      # Secondary mgmt (volfiles)
DATA_PORT_START=49152                 # Start of published brick/data ports
DATA_PORT_END=60999                   # End of published brick/data ports (match MAX_PORT)
PRIVATE_IP=10.0.1.2                   # Host's IP reachable by clients (10.1.0.0/16)
ADDRESS_FAMILY=inet                   # inet (IPv4) or inet6 (IPv6)
MAX_PORT=60999                        # Upper bound for Gluster-assigned ports

# -----------------------------------------------------------------------------
# Bricks — map host paths to /bricks/brick1 and /bricks/brick2 in container
# NOTE: You must ensure these host paths exist on the Docker host.
HOST_BRICK1=/mnt/gluster/brick1
HOST_BRICK2=/home/gluster/brick2

# -----------------------------------------------------------------------------
# Volume settings
MODE=init                             # init|brick
VOLNAME=gv0                           # volume name
VTYPE=replica                         # replica|distribute|disperse (stack targets replica)
REPLICA=2                             # replica count (2 for replica-2)
TRANSPORT=tcp                         # tcp
CREATE_VOLUME=1                       # 1=create if missing, 0=do not create
ALLOW_FORCE_CREATE=1                  # 1=auto-accept force prompts for replica-2, 0=no
VOL_OPTS=performance.client-io-threads=on,cluster.quorum-type=auto
AUTH_ALLOW=10.0.1.0/24                # CIDR or hosts allowed to mount
NFS_DISABLE=1                         # disable legacy NFS translator

# -----------------------------------------------------------------------------
# Multi-host (optional; not required for solo)
PEERS=                                # comma-separated list of peer hostnames/IPs
REQUIRE_ALL_PEERS=0                   # 1=wait for all peers, 0=continue if missing
ALLOW_EMPTY_STATE=0                   # 1=allow empty /var/lib/glusterd at start
